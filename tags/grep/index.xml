<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>grep on blog-ja.dtan4.net</title><link>https://blog-ja.dtan4.net/tags/grep/</link><description>Recent content in grep on blog-ja.dtan4.net</description><generator>Hugo -- gohugo.io</generator><language>ja-JP</language><copyright>Copyright &amp;copy; 2020 dtan4 All Rights Reserved</copyright><lastBuildDate>Sun, 15 Feb 2015 00:00:00 +0000</lastBuildDate><atom:link href="https://blog-ja.dtan4.net/tags/grep/index.xml" rel="self" type="application/rss+xml"/><item><title>grep の出力をバッファさせない</title><link>https://blog-ja.dtan4.net/posts/qiita-f14f3c10d73e85ff30af/</link><pubDate>Sun, 15 Feb 2015 00:00:00 +0000</pubDate><guid>https://blog-ja.dtan4.net/posts/qiita-f14f3c10d73e85ff30af/</guid><description>この記事はQiitaの記事をエクスポートしたものです。内容が古くなっている可能性があります。
grep コマンドは、何もしないと出力をバッファする（一旦溜め込む）ようになっています。
あるファイル全体とか固定のデータに対して grep する場合は特に気にならないでしょう。 しかしストリーミングデータを扱う場合、例えば何らかのログファイルを tail -f したものに対して grep すると、複数行がまとめて遅延して出力されてしまいます。 ここは元のログが出力されると（ほぼ）同時に、リアルタイムに grep 結果も出力してほしいところです。
解決策: --line-buffered オプション grep に --line-buffered オプションをつけると、出力がバッファされることなくリアルタイムに表示されるようになります！
$ tail -f /var/log/access.log | grep -E &amp;#39;\.png$&amp;#39; --line-buffered --line-buffered は、「1行単位で出力させる」というオプションです。BSD grep と GNU grep ともに用意されているので、Mac ユーザも Linux ユーザも安心です。
man 見てみましょう。
# grep (BSD grep) 2.5.1-FreeBSD --line-buffered Force output to be line buffered. By default, output is line buffered when standard output is a terminal and block buffered otherwise.</description></item></channel></rss>